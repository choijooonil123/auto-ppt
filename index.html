<!doctype html>

<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>학습형 자동전환 슬라이드쇼 (완성본)</title>
  <style>
    body{margin:0;font-family:sans-serif;background:#0b1020;color:#fff;text-align:center}
    .slide{width:100%;height:80vh;display:flex;flex-direction:column;justify-content:center;align-items:center}
    .controls{position:fixed;bottom:20px;right:20px;display:flex;gap:10px;z-index:10}
    .controls button{width:60px;height:60px;border-radius:50%;border:none;font-size:22px;cursor:pointer;color:#fff}
    .primary{background:#5fa2ff}
    .warn{background:#ffb020}
    .danger{background:#ff2f6a}
    .info{background:#777}
  </style>
</head>
<body>
  <div id="slide" class="slide"></div>
  <div class="controls">
    <button id="fabStart" class="primary" title="시작">▶</button>
    <button id="fabPrev" class="info" title="이전">←</button>
    <button id="fabPause" class="warn" title="일시정지/재개">⏸</button>
    <button id="fabNext" class="info" title="다음">→</button>
  </div>
  <script>
    const slides=[
      {h:"1. 오프닝",t:"첫 슬라이드에서 ▶로 시작 후 → 눌러 1→2 전환 시간을 학습"},
      {h:"2. 안내",t:"2번 슬라이드 도착 시 경과시간을 저장하여 템포 설정"},
      {h:"3. 본론",t:"여기부터 자동 전환 시작"},
      {h:"4. 내용",t:"저장된 템포에 따라 자동 전환"},
      {h:"5. 마무리",t:"끝 슬라이드"}
    ];let idx=-1,learnedMs=null,t0=null,timer=null,paused=false,remaining=0,lastTick=0;

const $slide=document.getElementById('slide');
const $fabStart=document.getElementById('fabStart');
const $fabPrev=document.getElementById('fabPrev');
const $fabNext=document.getElementById('fabNext');
const $fabPause=document.getElementById('fabPause');

function render(){
  if(idx<0){$slide.innerHTML='<h1>시작 ▶ 버튼을 눌러주세요</h1>';return;}
  const s=slides[idx];
  $slide.innerHTML=`<h1>${s.h}</h1><p>${s.t}</p>`;
}

function go(i){
  clearTimeout(timer);
  idx=Math.max(0,Math.min(i,slides.length-1));
  render();
  if(idx===0){t0=performance.now();learnedMs=null;}
  if(idx===1&&t0){
    learnedMs=performance.now()-t0;
    setAuto();
  }
  if(idx>=2&&learnedMs&&!paused){setAuto();}
}

function setAuto(ms=learnedMs){
  lastTick=performance.now();
  timer=setTimeout(()=>{
    if(idx<slides.length-1) go(idx+1);
  },ms);
}

function manualNext(){clearTimeout(timer);if(idx<slides.length-1)go(idx+1);}
function manualPrev(){clearTimeout(timer);if(idx>0)go(idx-1);}

function togglePause(){
  if(!learnedMs)return;
  if(!paused){
    paused=true;
    $fabPause.textContent='▶';
    remaining=learnedMs-(performance.now()-lastTick);
    clearTimeout(timer);
  } else {
    paused=false;
    $fabPause.textContent='⏸';
    timer=setTimeout(()=>{go(idx+1);},remaining);
  }
}

$fabStart.onclick=()=>go(0);
$fabNext.onclick=manualNext;
$fabPrev.onclick=manualPrev;
$fabPause.onclick=togglePause;

render();

  </script>
</body>
</html>
